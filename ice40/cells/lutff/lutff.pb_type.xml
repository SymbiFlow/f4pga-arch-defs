<!-- set: ai sw=1 ts=1 sta et -->
<!-- ################################################################ -->
<!-- # The lutff pair found 8 times inside the PLB logic cell       # -->
<!-- ################################################################ -->
<pb_type name="BLK_IG-LUTFF" num_pb="8" xmlns:xi="http://www.w3.org/2001/XInclude">

 <!-- Data -->
 <input  name="I" num_pins="4" equivalent="false"/> <!-- LUT inputs -->
 <output name="O" num_pins="1" equivalent="false"/> <!-- LUT output -->

 <!-- Flipflop controls -->
                                                      <!-- ??? FF output   -->
 <clock name="CLK" num_pins="1" />                    <!-- FF clock        -->
 <input name="EN"  num_pins="1" equivalent="false"/>  <!-- FF clock enable -->
 <input name="SR"  num_pins="1" equivalent="false"/>  <!-- FF set/reset    -->

 <!-- Fast carry -->
 <input name="FCIN"  num_pins="1" equivalent="false"/>   <!-- Carry in     -->
 <output name="FCOUT" num_pins="1" equivalent="false"/>  <!-- Carry output -->

 <!-- SB_LUT - 4 input LUT -->
 <xi:include href="../../primitives/sb_lut/sb_lut.pb_type.xml"/>

 <!-- SB_FF - D FlipFlop -->
 <xi:include href="../../primitives/sb_ff/sb_ff.pb_type.xml"/>

 <!-- SB_CARRY -->
 <xi:include href="../../primitives/sb_carry/sb_carry.pb_type.xml"/>

 <interconnect>
  <direct name="LUT.I[0]" input="BLK_IG-LUTFF.I[0]"                   output="LUT.I[0]" />
  <direct name="LUT.I[1]" input="BLK_IG-LUTFF.I[1]"                   output="LUT.I[1]" />
  <direct name="LUT.I[2]" input="BLK_IG-LUTFF.I[2]"                   output="LUT.I[2]" />
  <mux    name="LUT.I[3]" input="BLK_IG-LUTFF.I[3] BLK_IG-LUTFF.FCIN" output="LUT.I[3]" />

  <direct name="SB_CARRY.I0" input="BLK_IG-LUTFF.I[1]" output="SB_CARRY.I0" />
  <direct name="SB_CARRY.I1" input="BLK_IG-LUTFF.I[2]" output="SB_CARRY.I1" />

  <direct name="BLK_IG-LUTFF.EN"  input="BLK_IG-LUTFF.EN"  output="SB_FF.E" />
  <direct name="BLK_IG-LUTFF.CLK" input="BLK_IG-LUTFF.CLK" output="SB_FF.C" />
  <direct name="BLK_IG-LUTFF.SR"  input="BLK_IG-LUTFF.SR"  output="SB_FF.S" />
  <direct name="LUT2FF"    input="LUT.O"     output="SB_FF.D"><!--
   <pack_pattern name="LUT2FF" in_port="LUT.O" out_port="SB_FF.D" />
  --></direct>

  <mux    name="BLK_IG-LUTFF.O" input="LUT.O SB_FF.Q" output="BLK_IG-LUTFF.O" />

  <!-- Carry chain -->
  <direct name="BLK_IG-LUTFF.FCIN"  input="BLK_IG-LUTFF.FCIN"   output="SB_CARRY.CI">
   <pack_pattern name="CARRYCHAIN" in_port="BLK_IG-LUTFF.FCIN" out_port="SB_CARRY.CI"/>
  </direct>
  <direct name="BLK_IG-LUTFF.FCOUT" input="SB_CARRY.CO" output="BLK_IG-LUTFF.FCOUT">
   <pack_pattern name="CARRYCHAIN" in_port="SB_CARRY.CO" out_port="BLK_IG-LUTFF.FCOUT"/>
  </direct>

 </interconnect>
</pb_type>
