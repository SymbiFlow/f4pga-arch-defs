<!-- A diagram for the iCE40 PLB "Logic Cell" is shown in;
  -->
<pb_type name="PLB">

  <pb_type name="CELL" num_pb="8">
    <clock name="CLK"/>
    <input name="EN" num_pins="1" equivalent="false"/>
    <input name="SR" num_pins="1" equivalent="false"/>

    <input  name="I" num_pins="4" equivalent="false"/>
    <output name="O" num_pins="1" equivalent="false"/>

    <!-- Fast carry -->
    <input name="FCIN"  num_pins="1" equivalent="false"/>
    <input name="FCOUT" num_pins="1" equivalent="false"/>

    <pb_type name="LUT4" num_pb="1" class="lut" blif_model=".names">
      <input  name="I" num_pins="4" port_class="lut_in" />
      <output name="O" num_pins="1" port_class="lut_out" />
    </pb_type>

    <!-- DFF -->
    <pb_type name="DFF" num_pb="1" class="flipflop" blif_model=".latch">
      <input  name="D"  num_pins="1" port_class="D" />
      <input  name="EN" num_pins="1"/> <!-- Clock enable -->
      <clock  name="CK" num_pins="1" port_class="clock" />
      <input  name="SR" num_pins="1"/>
      <output name="Q"  num_pins="1" port_class="Q" />
    </pb_type>

    <!-- CARRY -->
    <pb_type name="CARRY"  num_pb="4" blif_model=".subckt CARRY">
      <input  name="I2"    num_pins="1"/>
      <input  name="FCIN"  num_pins="1"/>
      <input  name="I1"    num_pins="1"/>
      <output name="FCOUT" num_pins="1"/>
    </pb_type>

    <interconnect>
      <direct name="I0" input="CELL.I[0]"           output="LUT4.I[0]"/>
      <direct name="I1" input="CELL.I[1]"           output="{LUT4.I[1] CARRY.I1}"/>
      <direct name="I2" input="CELL.I[2]"           output="{LUT4.I[2] CARRY.I2}"/>
      <mux    name="I3" input="CELL.I[0] CELL.FCIN" output="LUT4.I[3]"/>

      <direct name="FCIN"  input="CELL.FCIN"        output="CARRY.FCIN"/>
      <direct name="FCOUT" input="CARRY.FCOUT"      output="CELL.FCOUT"/>

      <mux    name="O"     input="LUT.O DFF.Q"      output="CELL.O"/>
    </interconnect>
  </pb_type>

  <interconnect>
    <mux    name="SR"    input="GND   CELL.SR"    output="
         DFF[0].SR DFF[1].SR DFF[2].SR DFF[3].SR
	 DFF[4].SR DFF[5].SR DFF[6].SR DFF[7].SR
    "/>
    <mux    name="EN"    input="VCC   CELL.EN"    output="
         DFF[0].EN DFF[1].EN DFF[2].EN DFF[3].EN
         DFF[4].EN DFF[5].EN DFF[6].EN DFF[7].EN
    "/>
  </interconnect>

  <!-- Adjacent - Spans  2 PLBs -->
  <!-- x4       - Spans  5 PLBs -->
  <!-- x13      - Spans 13 PLBs -->
  <!-- connections in diagonal, horizontal and vertical directions -->

</pb_type>
